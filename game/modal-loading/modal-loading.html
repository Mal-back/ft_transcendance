<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/notif.css">
    <link rel="stylesheet" href="../css/colors/colors.css">
    <link rel="stylesheet" href="../css/background-basic.css">
    <link rel="stylesheet" href="../css/friend-list.css">
    <title id="page-title">TOURNAMENT - CONNECT 4 - GLOBAL RANKING</title>
    <style>
        .gif {
            background-image: url("../img/bg.jpeg");
            background-position: center;
            background-repeat: no-repeat;
            background-size: contain;
            /* height: 100%; */
            /* width: 100%; */
            width: 100px;
            /* Example width */
            height: 100px;
            position: relative;
            max-width: min(7vh, 7vw);
            max-height: min(7vh, 7vw);
        }
    </style>
</head>

<body>
    <header>
        <div style="background-color: gray;">
            <div class="container d-flex align-items-center py-2">
                <div class="icon-container d-flex align-items-center">
                    <button class="btn btn-light" id="toggleSidebar" data-bs-toggle="offcanvas"
                        data-bs-target="#sidebar" aria-controls="sidebar">
                        <i class="bi bi-list"></i>
                    </button>
                    <a href="/" class="btn btn-light" title="Home">
                        <i class="bi bi-house-fill"></i>
                    </a>
                    <a href="/authentification" class="btn btn-light" title="Logout">
                        <i class="bi bi-box-arrow-in-right"></i>
                    </a>

                    <!-- Notification Bell Updated -->
                    <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#inviteModal"
                        title="Notifications">
                        <i class="bi bi-mailbox2"></i>
                        <span id="notificationbell">
                            <div id="notificationcount" class=""></div>
                        </span>
                    </button>
                </div>
                <div id="mainTitle" class="text-black text-center flex-grow-1" style="font-size: 3.5vh;">
                    FT_TRANSCENDENCE
                </div>

                <div class="icon-container-right dropdown d-flex align-items-center p">
                    <button class="btn btn-light dropdown-toggle" type="button" id="languageDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-translate"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                        <li><a class="dropdown-item" href="?lang=en">English</a></li>
                        <li><a class="dropdown-item" href="?lang=fr">Fran√ßais</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <!-- Invite Modal -->
    <div class="modal fade" id="inviteModal" tabindex="-1" aria-labelledby="inviteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="inviteModalLabel">Friend Invites</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body scroll-notif">
                    <ul id="inviteList" class="list-group">
                        <!-- Invites will be appended here dynamically -->
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="offcanvas offcanvas-start bg-dark text-white" id="sidebar" tabindex="-1"
                aria-labelledby="sidebarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="sidebarLabel">Menu</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
                        aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="nav flex-column">
                        <a class="nav-link text-white my-4" href="/" data-link id="menuHome"><i
                                class="bi bi-house-fill"></i> HOME</a>
                        <a class="nav-link text-white my-4" href="/game" data-link id="menuGame"><i
                                class="bi bi-controller"></i> Game</a>
                        <a class="nav-link text-white my-4" href="/profile" data-link id="menuProfile"><i
                                class="bi bi-person"></i> Profile</a>
                        <a class="nav-link text-white my-4" href="/friends" data-link id="menuFriends"><i
                                class="bi bi-person-heart"></i> Friends</a>
                        <a class="nav-link text-white my-4" href="/authentification" data-link id="menuLogout"><i
                                class="bi bi-box-arrow-in-right"></i> Logout</a>
                        <a class="nav-link text-white my-4" href="/authentification" data-link id="menuLogin"><i
                                class="bi bi-box-arrow-in-left"></i> Login</a>
                    </div>
                </div>
            </div>
            <!-- Main Content -->
            <div class="col d-flex justify-content-center align-items-center">
                <div class="background ">
                    <button type="button" class="btn btn-success" data-bs-toggle="modal"
                        data-bs-target="#loading-modal">loading icon modal</button>
                    <button type="button" class="btn btn-link" id="openPrivacyPolicy">
                        Privacy Policy
                    </button>
                    <button type="button" class="btn btn-danger white-txt" data-bs-toggle="modal"
                        data-bs-target="#legalMentions">
                        Legal Mentions
                    </button>
                    <button type="button" class="btn btn-danger white-txt" data-bs-toggle="modal"
                        data-bs-target="#matchFoundModal">
                        Match Found
                    </button>
                </div>
            </div>
            <div class="modal fade" id="legalMentions" tabindex="-1" aria-labelledby="legalMentionsLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content ">
                        <div class="modal-header">
                            <h5 class="modal-title" id="legalMentionsLabel">Legal Mentions</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body d-flex justify-content-center">
                            <!-- Buttons without data-bs-toggle and data-bs-target -->
                            <button type="button" class="btn btn-danger white-txt" id="openPrivacyPolicyBtn"
                                style="margin-right: 3px;">
                                Privacy Policy
                            </button>
                            <button type="button" class="btn btn-secondary white-txt" id="openTermsOfUseBtn">
                                Terms Of Use
                            </button>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="loading-modal" tabindex="-1" aria-labelledby="loading-modalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered loading-modal-diag">
                    <!-- Added modal-dialog-centered here -->
                    <div class="modal-content">
                        <div class="modal-body loading-modal-body">
                            <div class="d-flex align-items-center justify-content-center">
                                <!-- Ensure flexbox is centered -->
                                <strong role="status">Loading...</strong>
                                <div class="spinner-border ms-2" aria-hidden="true"></div>
                                <!-- Add margin for spacing -->
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Stop
                                Matchmaking</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Privacy Policy Modal -->
            <div class="modal fade" id="privacyPolicyModal" tabindex="-1" aria-labelledby="privacyPolicyModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-80">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="privacyPolicyModalLabel">Privacy Policy</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body overflow-auto" style="max-height: 70vh;">
                            <!-- Using <pre> to preserve formatting -->
                            <pre id="privacyPolicyContent" style="white-space: pre-wrap;">Loading...</pre>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="termsOfUseModal" tabindex="-1" aria-labelledby="termsOfUseModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-80">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="termsOfUseModalLabel">Terms of Use</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body overflow-auto" style="max-height: 70vh;">
                            <!-- Using <pre> to preserve formatting -->
                            <pre id="termsOfUseContent" style="white-space: pre-wrap;">Loading...</pre>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="matchFoundModal" tabindex="-1" aria-labelledby="matchFoundModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered loading-modal-diag">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title text-center" id="matchFoundTitle">Game Result:</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="d-flex align-items-center justify-content-center row">
                                <div class="text-center m-1">
                                    <h5><strong>WINNER : <span style="color:red">CAT</span></strong></h5>
                                </div>
                                <div class="text-center m-1">
                                    <h6><strong>1 - 0</strong></h6>
                                </div>
                                <div class="text-center m-1">
                                    <h5><strong>LOOSER : <span style="color:blue">DOG</span></strong></h5>
                                </div>
                                <div class="gif rounded-circle"
                                    style="background-image: url(../img/ts/taylor-swift-cookie.gif); ">
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        <script>
            function changeLanguage(translations) {
                const translation = translations;
                console.log(translation);
                if (translation) {
                    // Update main content translations
                    // Update menu translations using innerHTML
                    document.getElementById('menuHome').innerHTML = `<i class="bi bi-house-fill"></i> ${translation.menu.home}`;
                    document.getElementById('menuGame').innerHTML = `<i class="bi bi-controller"></i> ${translation.menu.game}`;
                    document.getElementById('menuProfile').innerHTML = `<i class="bi bi-person"></i> ${translation.menu.profile}`;
                    document.getElementById('menuFriends').innerHTML = `<i class="bi bi-person-heart"></i> ${translation.menu.friends}`;
                    document.getElementById('menuLogout').innerHTML = `<i class="bi bi-box-arrow-in-right"></i> ${translation.menu.logout}`;
                    document.getElementById('menuLogin').innerHTML = `<i class="bi bi-box-arrow-in-left"></i> ${translation.menu.login}`;
                }
            }

            // On page load, fetch the translations and apply the selected language
            document.addEventListener('DOMContentLoaded', function () {
                // const params = new URLSearchParams(window.location.search);
                // const selectedLang = params.get('lang') || 'en'; // Default to English if no language parameter is found
                // console.log(selectedLang);
                // const translationFile = selectedLang === 'fr' ? '../json/fr.json' : '../json/en.json';
                // 
                // fetch(translationFile)
                // .then(response => {
                // if (!response.ok) {
                // throw new Error('Network response was not ok');
                // }
                // return response.json();
                // })
                // .then(translations => {
                // changeLanguage(translations);
                // })
                // .catch(error => {
                // console.error('There was a problem with the fetch operation:', error);
                // });
            });
            // Event listener for Privacy Policy button in the Legal Mentions modal
            document.getElementById('openPrivacyPolicyBtn').addEventListener('click', function () {
                fetch('../rgpd/politique-en.txt')
                    .then(response => {
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.text();
                    })
                    .then(data => {
                        document.getElementById('privacyPolicyContent').textContent = data;
                    })
                    .catch(error => {
                        console.error('Error fetching the privacy policy:', error);
                        document.getElementById('privacyPolicyContent').textContent = 'Error loading privacy policy.';
                    });

                // Show Privacy Policy modal
                let privacyPolicyModal = new bootstrap.Modal(document.getElementById('privacyPolicyModal'));
                privacyPolicyModal.show();
            });

            // Event listener for Terms of Use button in the Legal Mentions modal
            document.getElementById('openTermsOfUseBtn').addEventListener('click', function () {
                fetch('../rgpd/terms-of-use-en.txt')
                    .then(response => {
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.text();
                    })
                    .then(data => {
                        document.getElementById('termsOfUseContent').textContent = data;
                    })
                    .catch(error => {
                        console.error('Error fetching the terms of use:', error);
                        document.getElementById('termsOfUseContent').textContent = 'Error loading terms of use.';
                    });

                // Show Terms of Use modal
                let termsOfUseModal = new bootstrap.Modal(document.getElementById('termsOfUseModal'));
                termsOfUseModal.show();
            });


        </script>
        <script src="../js/notif.js"></script>
</body>

</html>